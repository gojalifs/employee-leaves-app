import{j as e,S as N}from"./app-hpof5UXI.js";import{B as C}from"./button-GmsC7mJ2.js";import{u as I,F as P,a,b as i,c as d,d as p,e as c,f as m,s as V,z as n}from"./index-C6muke0y.js";import{S as x,a as u,b as h,c as j,d as v}from"./select-nCYOwixR.js";import{t as g}from"./index-D00Qqd_r.js";import{S as E}from"./input-6Yfd_X2a.js";import"./utils-YvIYhwMp.js";import"./index-BDFscTOR.js";import"./index-Br8jnGSO.js";import"./index-DO7uKY43.js";import"./index-DUJvO9Ti.js";import"./createLucideIcon-DGoynV5J.js";import"./description-CgPDT6q2.js";import"./use-sync-refs-B7FUBJr3.js";const R=n.object({department:n.string().nonempty(),requester_position:n.string().nonempty(),approval_level:n.string().nonempty(),approval_position:n.string().nonempty(),next_approval:n.string()});function X({approval:l,depts:w,positions:S,approvals:q}){var f,b,y,A,_;const t=I({resolver:V(R),defaultValues:{department:((f=l.department)==null?void 0:f.id.toString())??"",requester_position:((b=l.requester_position)==null?void 0:b.id.toString())??"",approval_level:((y=l.level)==null?void 0:y.toString())??"",approval_position:((A=l.position)==null?void 0:A.id.toString())??"",next_approval:((_=l.next_approval)==null?void 0:_.id.toString())??""}});function D(o){N.patch(route("approval.update",l.id),o,{preserveScroll:!0,preserveState:!0,onError:r=>{g.error(r.msg)}})}return e.jsxs("div",{className:"mx-auto max-w-2xl rounded-lg bg-white p-6 shadow-md",children:[e.jsx("h1",{className:"mb-6 text-2xl font-bold",children:"Update Approval Data"}),e.jsx(P,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(D),className:"space-y-4",children:[e.jsx(a,{control:t.control,name:"department",render:({field:o})=>e.jsxs(i,{children:[e.jsx(d,{htmlFor:"department",children:"Approval"}),e.jsx(p,{children:e.jsxs(x,{value:o.value,onValueChange:o.onChange,children:[e.jsx(u,{className:"w-full rounded-md border border-gray-500 px-4 py-2",children:e.jsx(h,{placeholder:"Select Approval"})}),e.jsx(j,{children:w.map(r=>e.jsx(v,{value:r.id.toString(),children:r.name},r.id))})]})}),e.jsx(c,{children:"Approval"}),e.jsx(m,{})]})}),e.jsx(a,{control:t.control,name:"requester_position",render:({field:o})=>e.jsxs(i,{children:[e.jsx(d,{htmlFor:"requester_position",children:"Requester Position"}),e.jsx(p,{children:e.jsxs(x,{value:o.value,onValueChange:o.onChange,children:[e.jsx(u,{className:"w-full rounded-md border border-gray-500 px-4 py-2",children:e.jsx(h,{placeholder:"Select Requester Position"})}),e.jsx(j,{children:S.map(r=>e.jsx(v,{value:r.id.toString(),children:r.name},r.id))})]})}),e.jsx(c,{children:"User/Requester Position"}),e.jsx(m,{})]})}),e.jsx(a,{control:t.control,name:"approval_level",render:({field:o})=>e.jsxs(i,{children:[e.jsx(d,{htmlFor:"approval_level",children:"Approval level"}),e.jsx(p,{children:e.jsx(E,{...o,placeholder:"Approval Level",className:"w-full rounded-md border px-4 py-2",onInput:r=>{const s=r.target;s.value=s.value.replace(/\D/g,"")}})}),e.jsx(c,{children:"Approval Level, e.g 1, 2, 3, 4"}),e.jsx(m,{})]})}),e.jsx(a,{control:t.control,name:"approval_position",render:({field:o})=>e.jsxs(i,{children:[e.jsx(d,{htmlFor:"approval_position",children:"Approval Position"}),e.jsx(p,{children:e.jsxs(x,{value:o.value,onValueChange:o.onChange,children:[e.jsx(u,{className:"w-full rounded-md border border-gray-500 px-4 py-2",children:e.jsx(h,{placeholder:"Select Approval Position"})}),e.jsx(j,{children:S.map(r=>e.jsx(v,{value:r.id.toString(),children:r.name},r.id))})]})}),e.jsx(c,{children:"Current Approval Position"}),e.jsx(m,{})]})}),e.jsx(a,{control:t.control,name:"next_approval",render:({field:o})=>e.jsxs(i,{children:[e.jsx(d,{htmlFor:"next_approval",children:"Next Approval ID"}),e.jsx(p,{children:e.jsxs(x,{value:o.value,onValueChange:o.onChange,children:[e.jsx(u,{className:"w-full rounded-md border border-gray-500 px-4 py-2",children:e.jsx(h,{placeholder:"Select Next Approval ID"})}),e.jsx(j,{children:q.map(r=>{var s,F;return e.jsxs(v,{value:r.id.toString(),children:[r.id," -"," ",(s=r.position)==null?void 0:s.name," at"," ",(F=r.department)==null?void 0:F.name]},r.id)})})]})}),e.jsx(c,{children:"Next Approval ID"}),e.jsx(m,{})]})}),e.jsx(C,{variant:"default",type:"submit",className:"w-full",children:"Update Approval"})]})}),e.jsx(C,{variant:"destructive",onClick:()=>{confirm("Are you sure you want to delete this Approval?")&&N.delete(route("approval.destroy",{id:l.id}),{onSuccess:()=>{g.success("Approval deleted successfully")},onError:o=>{g.error("Failed to delete Approval"),console.error(o)}})},className:"my-2 w-full",children:"Delete"})]})}export{X as default};
