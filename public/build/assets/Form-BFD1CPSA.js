import{j as e,S as y}from"./app-hpof5UXI.js";import{B as g}from"./button-GmsC7mJ2.js";import{C as U}from"./checkbox-B7ITrf-M.js";import{u as k,F as A,a,b as t,c as m,d,e as i,f as c,s as V,z as n}from"./index-C6muke0y.js";import{S,a as b,b as F,c as v,d as N}from"./select-nCYOwixR.js";import{t as p}from"./index-D00Qqd_r.js";import{S as j}from"./input-6Yfd_X2a.js";import"./utils-YvIYhwMp.js";import"./index-BDFscTOR.js";import"./index-Br8jnGSO.js";import"./index-DO7uKY43.js";import"./index-C-PcQbr2.js";import"./index-DUJvO9Ti.js";import"./createLucideIcon-DGoynV5J.js";import"./description-CgPDT6q2.js";import"./use-sync-refs-B7FUBJr3.js";const _=n.object({full_name:n.string().nonempty(),email:n.string().nonempty().email(),department:n.string().nonempty(),position:n.string().nonempty(),address:n.string().nonempty(),role:n.array(n.string()).refine(x=>x.some(h=>h),{message:"You have to select at least one item."})});function W({depts:x,positions:h,roles:C,user:l}){const o=k({resolver:V(_),defaultValues:{full_name:l.name??"",email:l.email??"",department:l.department.id.toString()??"",position:l.position.id.toString()??"",address:l.address??"",role:l.roles?l.roles.map(r=>r==null?void 0:r.name):[]}});function w(r){y.patch(route("employee.update",l.id),r,{preserveScroll:!0,preserveState:!0,onError:s=>{p.error(s.msg)}})}return e.jsxs("div",{className:"mx-auto max-w-2xl rounded-lg bg-white p-6 shadow-md",children:[e.jsx("h1",{className:"mb-6 text-2xl font-bold",children:"Update Employee Data"}),e.jsx(A,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(w),className:"space-y-4",children:[e.jsx(a,{control:o.control,name:"full_name",render:({field:r})=>e.jsxs(t,{children:[e.jsx(m,{htmlFor:"full_name",children:"Name"}),e.jsx(d,{children:e.jsx(j,{...r,placeholder:"Full Name",className:"w-full rounded-md border px-4 py-2",autoFocus:!0})}),e.jsx(i,{children:"Full Name"}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"email",render:({field:r})=>e.jsxs(t,{children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(d,{children:e.jsx(j,{...r,placeholder:"Email",className:"w-full rounded-md border px-4 py-2"})}),e.jsx(i,{children:"User Email"}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"department",render:({field:r})=>e.jsxs(t,{children:[e.jsx(m,{htmlFor:"department",children:"Department"}),e.jsx(d,{children:e.jsxs(S,{value:r.value,onValueChange:r.onChange,children:[e.jsx(b,{className:"w-full rounded-md border border-gray-500 px-4 py-2",children:e.jsx(F,{placeholder:"Select Department"})}),e.jsx(v,{children:x.map(s=>e.jsx(N,{value:s.id.toString(),children:s.name},s.id))})]})}),e.jsx(i,{children:"User Department"}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"position",render:({field:r})=>e.jsxs(t,{children:[e.jsx(m,{htmlFor:"position",children:"Position"}),e.jsx(d,{children:e.jsxs(S,{value:r.value,onValueChange:r.onChange,children:[e.jsx(b,{className:"w-full rounded-md border border-gray-500 px-4 py-2",children:e.jsx(F,{placeholder:"Select Position"})}),e.jsx(v,{children:h.map(s=>e.jsx(N,{value:s.id.toString(),children:s.name},s.id))})]})}),e.jsx(i,{children:"User Position"}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"address",render:({field:r})=>e.jsxs(t,{children:[e.jsx(m,{htmlFor:"address",children:"Address"}),e.jsx(d,{children:e.jsx(j,{...r,placeholder:"Address",className:"w-full rounded-md border px-4 py-2"})}),e.jsx(i,{children:"User Address"}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"role",render:()=>e.jsxs(t,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{className:"text-base",children:"Roles"}),e.jsx(i,{children:"Select the roles for this user"})]}),C.map(r=>e.jsx(a,{control:o.control,name:"role",render:({field:s})=>{var u;return e.jsxs(t,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(d,{children:e.jsx(U,{checked:(u=s.value)==null?void 0:u.includes(r.name),onCheckedChange:E=>{var f;return E?s.onChange([...s.value,r.name]):s.onChange((f=s.value)==null?void 0:f.filter(D=>D!==r.name))}})}),e.jsx(m,{className:"text-sm font-normal",children:r.name})]},r.name)}},r.name)),e.jsx(c,{})]})}),e.jsx(g,{variant:"default",type:"submit",className:"w-full",children:"Update Employee"})]})}),e.jsx(g,{variant:"destructive",onClick:()=>{confirm("Are you sure you want to delete this employee?")&&y.delete(route("employee.destroy",{id:l.id}),{onSuccess:()=>{p.success("Employee deleted successfully")},onError:r=>{p.error("Failed to delete employee"),console.error(r)}})},className:"my-2 w-full",children:"Delete"})]})}export{W as default};
